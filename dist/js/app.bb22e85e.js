(function(){"use strict";var t={8493:function(t,e,a){var s=a(5130),n=a(6768);const i=t=>((0,n.Qi)("data-v-b49ef1a6"),t=t(),(0,n.jt)(),t),r={id:"app"},o={key:0,class:"loading"},l=i((()=>(0,n.Lk)("div",{class:"content"},[(0,n.Lk)("div",{class:"logo"}),(0,n.Lk)("div",{class:"spinner-border text-light lst",role:"status"}),(0,n.Lk)("p",{class:"loading-text"},"Loading..."),(0,n.Lk)("p",{class:"version"},"v.1.0")],-1))),d=[l],c={key:1},u={key:0,class:"fixed-bottom navbar-expand-sm bg-light"},h={class:"nav nav-pills nav-fill gap-2 p-2 small rounded-1 shadow-sm colorss",role:"tablist",style:{"--bs-nav-link-color":"#ff7e5f","--bs-nav-pills-link-active-color":"#fff","--bs-nav-pills-link-active-bg":"#ff7e5f"}},p=i((()=>(0,n.Lk)("i",{class:"bi bi-envelope-open nav-link rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),m=[p],g=i((()=>(0,n.Lk)("i",{class:"bi bi-arrow-through-heart-fill nav-link rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),v=[g],b=i((()=>(0,n.Lk)("i",{class:"bi bi-chat-heart nav-link active rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),k=[b],f=i((()=>(0,n.Lk)("i",{class:"bi bi-person-fill nav-link rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),L=[f];function D(t,e,a,s,i,l){return(0,n.uX)(),(0,n.CE)("div",r,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(t.currentComponent))),i.loading?((0,n.uX)(),(0,n.CE)("div",o,d)):((0,n.uX)(),(0,n.CE)("div",c,[t.actMenu?((0,n.uX)(),(0,n.CE)("nav",u,[(0,n.Lk)("ul",h,[(0,n.Lk)("li",{class:"nav-item",onClick:e[0]||(e[0]=t=>l.loadComponent("repost")),role:"presentation"},m),(0,n.Lk)("li",{class:"nav-item",onClick:e[1]||(e[1]=t=>l.loadComponent("anketsNew")),role:"presentation"},v),(0,n.Lk)("li",{class:"nav-item",onClick:e[2]||(e[2]=t=>l.loadComponent("matchAnkets")),role:"presentation"},k),(0,n.Lk)("li",{class:"nav-item",onClick:e[3]||(e[3]=t=>l.loadComponent("editPerson")),role:"presentation"},L)])])):(0,n.Q3)("",!0)]))])}a(1373);const y="/api/users";async function A(t,e){try{const a=await fetch(y+t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`Ошибка: ${a.status} ${a.statusText}`);const s=await a.json();return console.log("Ответ от сервера:",s),s}catch(a){console.error("Ошибка при запросе:",a)}}async function w(t,e){try{const a=await fetch(y+t,{method:"POST",body:e,headers:{}});if(!a.ok)throw new Error(`Ошибка: ${a.status} ${a.statusText}`);const s=await a.json();return console.log("Ответ от сервера:",s),s}catch(a){console.error("Ошибка при запросе:",a)}}async function C(t,e){try{const a=await fetch(y+t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok)throw new Error(`Ошибка: ${a.status} ${a.statusText}`);const s=await a.json();return console.log("Ответ от сервера:",s),s}catch(a){console.error("Ошибка при запросе:",a)}}var x=a(782);const _=t=>((0,n.Qi)("data-v-9a009f7c"),t=t(),(0,n.jt)(),t),M={class:"container messDiv"},E={class:"p-5 rounded mt-3"},T={class:"col-md-7 col-lg-8"},S={class:"profile-header"},O=["src"],$=_((()=>(0,n.Lk)("h4",{class:"mb-3 text-center"},"Заполните ваш профиль",-1))),P={class:"row g-3"},F={class:"col-12"},j=_((()=>(0,n.Lk)("label",{for:"firstName",class:"form-label"},"Ваше имя",-1))),I={class:"col-md-5"},N=_((()=>(0,n.Lk)("label",{for:"birthdate",class:"form-label"},"Дата рождения",-1))),U=["max"],X={class:"col-md-5"},B=_((()=>(0,n.Lk)("label",{class:"form-label"},"Ваш пол",-1))),q=_((()=>(0,n.Lk)("option",{value:""},"Выбор ...",-1))),H=_((()=>(0,n.Lk)("option",{value:"1"},"Мужчина",-1))),z=_((()=>(0,n.Lk)("option",{value:"2"},"Девушка",-1))),Q=[q,H,z],R={class:"col-12"},W=_((()=>(0,n.Lk)("label",{for:"about",class:"form-label"},"Описание",-1))),J={class:"col-md-5"},K=_((()=>(0,n.Lk)("label",{class:"form-label"},"Вы ищите",-1))),Y=_((()=>(0,n.Lk)("option",{value:""},"Выбор ...",-1))),Z=_((()=>(0,n.Lk)("option",{value:"2"},"Девушек",-1))),V=_((()=>(0,n.Lk)("option",{value:"1"},"Мужчин",-1))),G=[Y,Z,V],tt=_((()=>(0,n.Lk)("hr",{class:"my-4"},null,-1))),et=["disabled"],at=_((()=>(0,n.Lk)("br",null,null,-1))),st=_((()=>(0,n.Lk)("br",null,null,-1))),nt=_((()=>(0,n.Lk)("br",null,null,-1))),it=_((()=>(0,n.Lk)("br",null,null,-1)));function rt(t,e,i,r,o,l){return(0,n.uX)(),(0,n.CE)("main",M,[(0,n.Lk)("div",E,[(0,n.Lk)("div",T,[(0,n.Lk)("div",S,[(0,n.Lk)("img",{src:t.user.avatar||a(8026),alt:"Avatar",onClick:e[0]||(e[0]=(...t)=>l.triggerFileInput&&l.triggerFileInput(...t)),style:{cursor:"pointer",border:"5px solid","border-color":"aliceblue"}},null,8,O)]),$,(0,n.Lk)("form",{onSubmit:e[10]||(e[10]=(0,s.D$)(((...t)=>l.handleSubmit&&l.handleSubmit(...t)),["prevent"])),class:"needs-validation",enctype:"multipart/form-data"},[(0,n.Lk)("div",P,[(0,n.Lk)("div",F,[j,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.user.name=e),type:"text",class:"form-control",placeholder:"",required:"",onInput:e[2]||(e[2]=(...t)=>l.validateName&&l.validateName(...t)),title:"Только буквы и пробелы"},null,544),[[s.Jo,t.user.name]])]),(0,n.Lk)("div",I,[N,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.user.birthdate=e),type:"date",class:"form-control",required:"",max:o.maxDate,onChange:e[4]||(e[4]=(...t)=>l.validateBirthdate&&l.validateBirthdate(...t))},null,40,U),[[s.Jo,t.user.birthdate]])]),(0,n.Lk)("div",X,[B,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[5]||(e[5]=e=>t.user.sex=e),class:"form-select",id:"sex",required:""},Q,512),[[s.u1,t.user.sex]])]),(0,n.Lk)("div",R,[W,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.user.about=e),type:"text",class:"form-control",placeholder:"Люблю гулять по Москве",required:"",onInput:e[7]||(e[7]=(...t)=>l.validateAbout&&l.validateAbout(...t)),title:"Только буквы и пробелы"},null,544),[[s.Jo,t.user.about]])]),(0,n.Lk)("div",J,[K,(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[8]||(e[8]=e=>t.user.searchsex=e),class:"form-select",id:"search",required:""},G,512),[[s.u1,t.user.searchsex]])])]),(0,n.Lk)("input",{type:"file",ref:"fileInput",style:{display:"none"},onChange:e[9]||(e[9]=(...t)=>l.handleFileChange&&l.handleFileChange(...t)),accept:"image/png, image/jpeg, image/jpg"},null,544),tt,(0,n.Lk)("button",{class:"w-100 btn btn-lg",disabled:o.isDisabled,type:"submit"},"Сохранить",8,et)],32)])]),at,st,nt,it])}var ot={name:"createPerson",data(){return{event_avatar:"",isDisabled:!1,tg:window.Telegram.WebApp,maxDate:(new Date).toISOString().split("T")[0]}},computed:{...(0,x.aH)(["user","currentComponent"])},methods:{...(0,x.i0)(["updateUserData","changeComponent"]),triggerFileInput(){this.$refs.fileInput.click()},handleSubmit(){this.updateUserData(this.user),this.user.name&&this.user.avatar&&this.user.searchsex&&this.user.sex?this.uploadImage():alert("Данных не хватает для создания анкеты, вы загрузили фото?")},validateName(){this.user.name=this.user.name.replace(/[^A-Za-zА-Яа-яЁё\s]/g,"")},validateAbout(){this.user.about=this.user.about.replace(/[^A-Za-zА-Яа-яЁё0-9\s.,!?;:()'"-]/g,"")},validateBirthdate(){new Date(this.user.birthdate).getFullYear(),(new Date).getFullYear()},handleFileChange(t){const e=t.target.files[0];e&&["image/jpeg","image/png","image/jpg"].includes(e.type)?(this.event_avatar=e,this.previewImage(e)):alert("Only JPG and PNG files are allowed!")},previewImage(t){const e=new FileReader;e.onload=t=>{this.user.avatar=t.target.result},e.readAsDataURL(t)},uploadImage(){if(!this.user.avatar)return void alert("Пожалуйста, выберите изображение для загрузки.");const t=new FormData;t.append("file",this.event_avatar),delete this.user.avatar,t.append("data",JSON.stringify(this.user)),t.append("token",JSON.stringify(this.user.token)),this.isDisabled=!0,w("/upload",t).then((t=>{t&&(this.updateUserData({token:t.token}),this.changeComponent("sucReg"))})).catch((t=>{alert("Ошибка при загрузке"),console.error("Error:",t)}))}}},lt=a(1241);const dt=(0,lt.A)(ot,[["render",rt],["__scopeId","data-v-9a009f7c"]]);var ct=dt,ut=a(4232);const ht=t=>((0,n.Qi)("data-v-56508d92"),t=t(),(0,n.jt)(),t),pt={class:"demo-1"},mt={key:0,class:"loading position-absolute top-50 start-50 translate-middle-x"},gt=ht((()=>(0,n.Lk)("div",{class:"gradient-div d-flex justify-content-center"},[(0,n.Lk)("p",{class:"position-absolute top-0 start-50 translate-middle-x"}),(0,n.Lk)("div",{class:"spinner-border text-light",role:"status"}),(0,n.Lk)("p",{class:"position-absolute text-center text-light pt-4 mt-4"},"Загрузка Анкет")],-1))),vt=[gt],bt={key:1,class:"slideshow"},kt={class:"slides"},ft={class:"slide__title"},Lt={class:"slide__desc"},Dt=ht((()=>(0,n.Lk)("br",null,null,-1))),yt={class:"badge text-bg-light rounded-pill"},At={class:"slidenav d-flex gap-5 justify-content-center bubs"},wt={class:"d-flex gap-5 justify-content-center bubs"},Ct={class:"navigBTNS"},xt=["disabled"],_t=ht((()=>(0,n.Lk)("i",{class:"bi bi-heart-fill fs-1 pt-1"},null,-1))),Mt=[_t],Et=ht((()=>(0,n.Lk)("div",{class:"dust-container-dsl"},null,-1))),Tt={class:"navigBTNS mt-4"},St=ht((()=>(0,n.Lk)("i",{"data-v-637c8da4":"",class:"bi bi-box2-heart-fill fs-1"},null,-1))),Ot={key:0,class:"position-absolute top-0 start-100 translate-middle badge border border-light rounded-circle bg-danger p-2"},$t=ht((()=>(0,n.Lk)("span",{class:"visually-hidden"},"unread messages",-1))),Pt=[$t],Ft={class:"navigBTNS"},jt=["disabled"],It=ht((()=>(0,n.Lk)("i",{class:"bi bi-x-lg fs-1"},null,-1))),Nt=[It],Ut=ht((()=>(0,n.Lk)("div",{class:"dust-container-like"},null,-1)));function Xt(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("body",pt,[(0,n.Lk)("main",null,[i.loading?((0,n.uX)(),(0,n.CE)("div",mt,vt)):((0,n.uX)(),(0,n.CE)("div",bt,[(0,n.Lk)("div",kt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.anket,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:t._id,class:(0,ut.C4)(["slide",{"slide--current":0===e}])},[(0,n.Lk)("div",{class:"slide__img",style:(0,ut.Tr)({backgroundImage:`url(/api/users/f1/${t.avatar})`})},null,4),(0,n.Lk)("h2",ft,(0,ut.v_)(t.name),1),(0,n.Lk)("p",Lt,[(0,n.eW)((0,ut.v_)(t.about),1),Dt,(0,n.Lk)("span",yt,"Возраст: "+(0,ut.v_)(r.calculateAge(t.birthdate)),1)])],2)))),128))]),(0,n.Lk)("nav",At,[(0,n.Lk)("div",wt,[(0,n.Lk)("div",Ct,[(0,n.Lk)("button",{class:"btn btn-light rounded-circle p-4 w-100 h-100 lh-1 slidenav__item--next animated-button d-flex justify-content-center align-items-center",onClick:e[0]||(e[0]=t=>r.prevSlide(!0)),disabled:i.isDisabled,type:"button"},Mt,8,xt)]),Et,(0,n.Lk)("div",Tt,[(0,n.Lk)("button",{type:"button",class:"btn btn-light rounded-circle position-relative p-4 w-100 h-100 lh-1 d-flex justify-content-center align-items-center",onClick:e[1]||(e[1]=(...t)=>r.nextPage&&r.nextPage(...t))},[St,i.update?((0,n.uX)(),(0,n.CE)("span",Ot,Pt)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Ft,[(0,n.Lk)("button",{class:"btn btn-light border-light rounded-circle p-4 w-100 h-100 lh-1 slidenav__item--prev reverse-animated-button d-flex justify-content-center align-items-center",onClick:e[2]||(e[2]=t=>r.prevSlide(!1)),disabled:i.isDisabled,type:"button"},Nt,8,jt)]),Ut])])]))])])}function Bt(){setTimeout((()=>document.body.classList.add("render")),60);const t=Array.from(document.querySelectorAll("nav.demos > .demo")),e=t=>{document.body.classList.remove("render"),document.body.addEventListener("transitionend",(()=>window.location=t.href))};t.forEach((t=>t.addEventListener("click",(t=>{t.preventDefault(),e(t.target)}))))}function qt(){document.querySelector(".animated-button").addEventListener("click",(function(){const t=this,e=document.querySelector(".dust-container-like"),a=t.getBoundingClientRect();for(let s=0;s<30;s++){const t=document.createElement("span");t.classList.add("particle-like"),e.appendChild(t);const s=2*Math.random()*Math.PI,n=30+120*Math.random(),i=Math.cos(s)*n,r=Math.sin(s)*n;t.style.setProperty("--translateX",`${i}px`),t.style.setProperty("--translateY",`${r}px`);const o=a.left+a.width/2,l=a.top+a.height/2;t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.animation="dustAnimation 1.5s forwards",t.addEventListener("animationend",(()=>t.remove()))}}))}function Ht(){document.querySelector(".reverse-animated-button").addEventListener("click",(function(){const t=this,e=document.querySelector(".dust-container-dsl"),a=t.getBoundingClientRect();for(let s=0;s<30;s++){const t=document.createElement("span");t.classList.add("particle-dsl"),e.appendChild(t);const s=2*Math.random()*Math.PI,n=60+60*Math.random(),i=Math.cos(s)*n,r=Math.sin(s)*n,o=a.left+a.width/2,l=a.top+a.height/2;t.style.left=`${o}px`,t.style.top=`${l}px`,t.style.setProperty("--translateX",`${i}px`),t.style.setProperty("--translateY",`${r}px`),t.style.animation="dustAnimationInward 1.5s forwards",t.addEventListener("animationend",(()=>t.remove()))}}))}function zt(t,e,a){var s;return function(){var n=this,i=arguments,r=function(){s=null,a||t.apply(n,i)},o=a&&!s;clearTimeout(s),s=setTimeout(r,e),o&&t.apply(n,i)}}class Qt{constructor(t){this.DOM={},this.DOM.el=t,this.settings={animation:{slides:{duration:600,easing:"easeOutQuint"},shape:{duration:300,easing:{in:"easeOutQuint",out:"easeOutQuad"}}},frameFill:"url(#gradient1)"},this.current=0,this.init()}init(){this.updateSlides(),this.DOM.nav=this.DOM.el.querySelector(".slidenav"),this.DOM.nextCtrl=this.DOM.nav.querySelector(".slidenav__item--next"),this.DOM.prevCtrl=this.DOM.nav.querySelector(".slidenav__item--prev"),this.createFrame(),this.initEvents(),this.updateSlides()}updateSlides(){this.DOM.slides=Array.from(this.DOM.el.querySelectorAll(".slides > .slide")),this.slidesTotal=this.DOM.slides.length,this.slidesTotal>0&&this.DOM.slides.forEach(((t,e)=>{e===this.current?t.classList.add("slide--current"):t.classList.remove("slide--current")}))}createFrame(){this.rect=this.DOM.el.getBoundingClientRect(),this.frameSize=this.rect.width/12,this.paths={initial:this.calculatePath("initial"),final:this.calculatePath("final")},this.DOM.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.DOM.svg.setAttribute("class","shape"),this.DOM.svg.setAttribute("width","100%"),this.DOM.svg.setAttribute("height","100%"),this.DOM.svg.setAttribute("viewbox",`0 0 ${this.rect.width} ${this.rect.height}`),this.DOM.svg.innerHTML=`\n            <defs>\n            <linearGradient id="gradient1" x1="0%" y1="0%" x2="0%" y2="100%">\n                <stop offset="0%" stop-color="#feb47b"></stop>\n                <stop offset="100%" stop-color="#ff7e5f"></stop>\n            </linearGradient>\n            </defs>\n            <path fill="${this.settings.frameFill}" d="${this.paths.initial}"/>\n        `,this.DOM.el.insertBefore(this.DOM.svg,this.DOM.nav),this.DOM.shape=this.DOM.svg.querySelector("path")}updateFrame(){this.paths.initial=this.calculatePath("initial"),this.paths.final=this.calculatePath("final"),this.DOM.svg.setAttribute("viewbox",`0 0 ${this.rect.width} ${this.rect.height}`),this.DOM.shape.setAttribute("d",this.isAnimating?this.paths.final:this.paths.initial)}calculatePath(t="initial"){return"initial"===t?`M 0,0 0,${this.rect.height} ${this.rect.width},${this.rect.height} ${this.rect.width},0 0,0 Z M 0,0 ${this.rect.width},0 ${this.rect.width},${this.rect.height} 0,${this.rect.height} Z`:`M 0,0 0,${this.rect.height} ${this.rect.width},${this.rect.height} ${this.rect.width},0 0,0 Z M ${this.frameSize},${this.frameSize} ${this.rect.width-this.frameSize},${this.frameSize} ${this.rect.width-this.frameSize},${this.rect.height-this.frameSize} ${this.frameSize},${this.rect.height-this.frameSize} Z`}initEvents(){this.DOM.nextCtrl.addEventListener("click",(()=>this.navigate("next"))),this.DOM.prevCtrl.addEventListener("click",(()=>this.navigate("next"))),window.addEventListener("resize",zt((()=>{this.rect=this.DOM.el.getBoundingClientRect(),this.updateFrame()}),20)),document.addEventListener("keydown",(t=>{const e=t.keyCode||t.which;37===e?this.navigate("prev"):39===e&&this.navigate("next")}))}navigate(t="next"){if(this.isAnimating)return!1;this.isAnimating=!0,this.updateSlides();const e=anime({targets:this.DOM.shape,duration:this.settings.animation.shape.duration,easing:this.settings.animation.shape.easing.in,d:this.paths.final}),a=()=>new Promise(((e,a)=>{const s=this.DOM.slides[this.current];anime({targets:s,duration:this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,translateX:"next"===t?-1*this.rect.width:this.rect.width,complete:()=>{s.classList.remove("slide--current"),e()}}),this.current="next"===t?this.current<this.slidesTotal-1?this.current+1:0:this.current>0?this.current-1:this.slidesTotal-1;const n=this.DOM.slides[this.current];n.classList.add("slide--current"),anime({targets:n,duration:this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,translateX:["next"===t?this.rect.width:-1*this.rect.width,0]});const i=n.querySelector(".slide__img");anime.remove(i),anime({targets:i,duration:4*this.settings.animation.slides.duration,easing:this.settings.animation.slides.easing,translateX:["next"===t?200:-200,0]})})),s=()=>{anime({targets:this.DOM.shape,duration:this.settings.animation.shape.duration,delay:150,easing:this.settings.animation.shape.easing.out,d:this.paths.initial,complete:()=>this.isAnimating=!1})};e.finished.then(a).then(s)}}var Rt={name:"anketsNew",data(){return{loading:!0,isDisabled:!1,currentSlide:0,nAnkets:-1,update:!1}},computed:{...(0,x.aH)(["user","anket","actions","actMenu"])},methods:{...(0,x.i0)(["updateAnketData","addAnketData","updateActionsData","updateUserData","updateMenuData","dellAnketData","dellActionsData","changeComponent"]),triggerHapticFeedback(t){window.Telegram?.WebApp?.HapticFeedback?t?window.Telegram.WebApp.HapticFeedback.impactOccurred("heavy"):window.Telegram.WebApp.HapticFeedback.impactOccurred("light"):console.log("Haptic feedback не поддерживается.")},async getFetchAnkets(){const t=this.user.token;let e=null;e=0!==this.actions.length&&this.actions;const a=await C("/ankets",{token:t,actions:e,page:this.currentSlide});0==a.data?(this.loading=!0,this.updateMenuData(!0)):(this.loading=!1,this.updateMenuData(!1)),this.currentSlide=this.currentSlide+a.data.length-1,this.updateAnketData(a.data),this.updateUserData({token:a.token})},async updateFetchAnkets(){const t=this.user.token;let e=null;e=0!==this.actions.length&&this.actions;const a=await C("/ankets",{token:t,actions:e,page:this.currentSlide});0===a.data.length||(this.addAnketData(a.data),this.updateUserData({token:a.token}))},async actionsUser(t){const e=this.anket[this.nAnkets].tid;this.updateActionsData({tid:e,action:t}),this.nAnkets+1===this.anket.length&&this.changeComponent("noAncets"),this.anket.length<this.nAnkets+3&&await this.updateFetchAnkets(),3===this.actions.length&&(await this.updateFetchAnkets(),this.dellActionsData())},async disableButtons(t){await this.actionsUser(t),this.isDisabled=!0,setTimeout((()=>{this.isDisabled=!1}),1450)},calculateAge(t){const e=new Date,a=new Date(t);let s=e.getFullYear()-a.getFullYear();const n=e.getMonth()-a.getMonth();return(n<0||0===n&&e.getDate()<a.getDate())&&s--,s},prevSlide(t){this.isDisabled||(this.nAnkets=this.nAnkets+1,this.disableButtons(t),this.triggerHapticFeedback(t))},nextPage(){this.changeComponent("matchAnkets"),this.triggerHapticFeedback()}},mounted(){this.getFetchAnkets().then((()=>{Bt(),new Qt(document.querySelector(".slideshow")),qt(),Ht()}))}};const Wt=(0,lt.A)(Rt,[["render",Xt],["__scopeId","data-v-56508d92"]]);var Jt=Wt;const Kt=t=>((0,n.Qi)("data-v-8191e3ec"),t=t(),(0,n.jt)(),t),Yt={class:"container my-4"},Zt={class:"overflow-auto",style:{"max-height":"100%"}},Vt={key:0,class:"row g-0 h-100 text-light"},Gt=Kt((()=>(0,n.Lk)("h1",null,"У вас еще нет взаимных лайков",-1))),te=[Gt],ee={key:1,class:"loading position-absolute top-50 start-50 translate-middle-x"},ae=Kt((()=>(0,n.Lk)("div",{class:"gradient-div d-flex justify-content-center"},[(0,n.Lk)("p",{class:"position-absolute top-0 start-50 translate-middle-x"}),(0,n.Lk)("div",{class:"spinner-border text-light",role:"status"}),(0,n.Lk)("p",{class:"position-absolute text-center text-light pt-4 mt-4"},"Загрузка взаимностей")],-1))),se=[ae],ne={class:"row g-0 h-100"},ie={class:"col-4"},re=["src"],oe={class:"col-8 h-100"},le={class:"card-body"},de={class:"card-title"},ce={class:"card-text"},ue=["onClick"],he=Kt((()=>(0,n.Lk)("i",{class:"bi bi-chat-dots"},null,-1)));function pe(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("div",Yt,[(0,n.Lk)("div",Zt,[i.endAnkets?((0,n.uX)(),(0,n.CE)("div",Vt,te)):(0,n.Q3)("",!0),i.loading?((0,n.uX)(),(0,n.CE)("div",ee,se)):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.match,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"card mx-auto shadow bg-white text-dark h-100 m-4",style:{"max-width":"540px"}},[(0,n.Lk)("div",ne,[(0,n.Lk)("div",ie,[(0,n.Lk)("img",{src:`./api/users/f1/${t.avatar}`,class:"img-fluid rounded-start h-100"},null,8,re)]),(0,n.Lk)("div",oe,[(0,n.Lk)("div",le,[(0,n.Lk)("div",null,[(0,n.Lk)("h5",de,(0,ut.v_)(t.name),1),(0,n.Lk)("p",ce,(0,ut.v_)(t.about),1)]),(0,n.Lk)("a",{class:"btn btn-dark w-100 mt-4",onClick:e=>r.getPeachUser(t.tid,t.name)},[he,(0,n.eW)(" Написать ")],8,ue)])])])])))),128))])])}a(4114);var me={name:"matchAnkets",data(){return{loading:!0,endAnkets:!1,match:[]}},computed:{...(0,x.aH)(["user","currentComponent"])},methods:{...(0,x.i0)(["changeComponent","updateMenuData"]),async getFetchMatch(){const t=this.user.token,e=await C("/match",{token:t});e.data?(this.match.push(...e.data),this.loading=!1,this.endAnkets=!1):(this.loading=!1,this.endAnkets=!0)},async getPeachUser(t,e){const a={...this.user,ttid:t,ancetName:e};await C("/getPeachUser",{data:a})}},mounted(){this.updateMenuData(!0),this.getFetchMatch()}};const ge=(0,lt.A)(me,[["render",pe],["__scopeId","data-v-8191e3ec"]]);var ve=ge;const be=t=>((0,n.Qi)("data-v-2e146b32"),t=t(),(0,n.jt)(),t),ke={class:"messDiv"},fe=be((()=>(0,n.Lk)("h1",{class:"position-absolute start-50 translate-middle"}," Создайте свою первую анкету ",-1))),Le=be((()=>(0,n.Lk)("p",{class:"position-absolute start-50 translate-middle"},"Готовы начать прямо сейчас ?",-1)));function De(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("div",ke,[fe,Le,(0,n.Lk)("button",{type:"button",onClick:e[0]||(e[0]=(...t)=>r.loadCreatePerson&&r.loadCreatePerson(...t)),class:"btn btn-lg btnBg position-absolute start-50 translate-middle"},"Начать")])}var ye={name:"messReg",computed:{...(0,x.aH)(["currentComponent"])},methods:{...(0,x.i0)(["changeComponent"]),loadCreatePerson(){this.changeComponent("createPerson")}}};const Ae=(0,lt.A)(ye,[["render",De],["__scopeId","data-v-2e146b32"]]);var we=Ae;const Ce=t=>((0,n.Qi)("data-v-18ebbf82"),t=t(),(0,n.jt)(),t),xe={class:"messDiv"},_e=Ce((()=>(0,n.Lk)("h1",{class:"position-absolute start-50 translate-middle"}," Анкета готова! ",-1))),Me=Ce((()=>(0,n.Lk)("p",{class:"position-absolute start-50 translate-middle"},"Мы временно отключили возможность вносить изменения в профиль, но скоро это исправим",-1)));function Ee(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("div",xe,[_e,Me,(0,n.Lk)("button",{type:"button",onClick:e[0]||(e[0]=(...t)=>r.loadCreatePerson&&r.loadCreatePerson(...t)),class:"btn btn-lg btnBg position-absolute start-50 translate-middle"},"Начать")])}var Te={data(){return{tg:window.Telegram.WebApp}},computed:{...(0,x.aH)(["currentComponent"])},methods:{...(0,x.i0)(["updateUserData","updateAnketData","changeComponent"]),async loaderInfo(){try{const t=await A("/",{initData:this.tg.initData,initDataUnsafe:this.tg.initDataUnsafe,platform:this.tg.platform});t.user&&(t.user.token=t.token,this.updateUserData({...t.user}),this.updateAnketData(t.ankets))}catch(t){console.error("Ошибка загрузки данных:",t)}},loadCreatePerson(){this.changeComponent("AnketsNew")}},mounted(){this.loaderInfo()}};const Se=(0,lt.A)(Te,[["render",Ee],["__scopeId","data-v-18ebbf82"]]);var Oe=Se;const $e=t=>((0,n.Qi)("data-v-3756c1f8"),t=t(),(0,n.jt)(),t),Pe={class:"messDiv"},Fe=$e((()=>(0,n.Lk)("h1",{class:"position-absolute start-50 translate-middle"}," К сожалению сейчас анкеты закончились... ",-1))),je=$e((()=>(0,n.Lk)("p",{class:"position-absolute start-50 translate-middle"},"Поделитесь нашим приложением с друзьями, чтобы анкет стало больше",-1)));function Ie(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("div",Pe,[Fe,je,(0,n.Lk)("button",{type:"button",onClick:e[0]||(e[0]=(...t)=>r.loadCreatePerson&&r.loadCreatePerson(...t)),class:"btn btn-lg btnBg position-absolute start-50 translate-middle"},"Поделиться")])}var Ne={computed:{...(0,x.aH)(["currentComponent"])},methods:{...(0,x.i0)(["changeComponent"]),loadCreatePerson(){this.changeComponent("repost")}}};const Ue=(0,lt.A)(Ne,[["render",Ie],["__scopeId","data-v-3756c1f8"]]);var Xe=Ue;const Be=t=>((0,n.Qi)("data-v-d751eb82"),t=t(),(0,n.jt)(),t),qe={class:"container cls"},He={class:""},ze={class:"p-5 rounded mt-3"},Qe=Be((()=>(0,n.Lk)("h3",null,"Поделитесь с друзьями ссылкой на приложение",-1))),Re=Be((()=>(0,n.Lk)("hr",null,null,-1)));function We(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("main",qe,[(0,n.Lk)("div",He,[(0,n.Lk)("div",ze,[Qe,Re,(0,n.Lk)("a",{class:"btn btn-lg wbtn",role:"button",onClick:e[0]||(e[0]=(...t)=>r.shareBot&&r.shareBot(...t))},"Поделиться ссылкой")])])])}var Je={name:"repostApp",computed:{...(0,x.aH)(["currentComponent"])},methods:{...(0,x.i0)(["changeComponent","updateMenuData"]),shareBot(){const t="Попробуй новое приложение для знакомств в Telegram",e="https://t.me/Peachstone_bot",a=`https://t.me/share/url?url=${e}&text=${t}`;window.location.href=a}},mounted(){this.updateMenuData(!0)}};const Ke=(0,lt.A)(Je,[["render",We],["__scopeId","data-v-d751eb82"]]);var Ye=Ke;const Ze=t=>((0,n.Qi)("data-v-4997f54d"),t=t(),(0,n.jt)(),t),Ve={class:"container mb-9"},Ge={class:""},ta={class:"peach-background"},ea={class:"profile-header"},aa=["src"],sa=Ze((()=>(0,n.Lk)("br",null,null,-1))),na=Ze((()=>(0,n.Lk)("br",null,null,-1))),ia={class:"profile-info"},ra=Ze((()=>(0,n.Lk)("p",null,"Редактирование анкет временно недоступно. Приложение находится в разработке",-1))),oa=(0,n.Fv)('<div class="container text-center" data-v-4997f54d><div class="card mb-3 premium-card" data-v-4997f54d><div class="card-body" data-v-4997f54d><h5 class="card-title" data-v-4997f54d><i class="fas fa-heart" data-v-4997f54d></i> Lovina Premium </h5><p class="card-text" data-v-4997f54d>расширенные возможности для знакомств и общения</p><button class="btn btn-primary" data-v-4997f54d>Активировать</button></div></div><div class="d-flex justify-content-between mb-3" data-v-4997f54d><div class="card gradient-card-left" data-v-4997f54d><div class="card-body" data-v-4997f54d><h5 class="card-title" data-v-4997f54d><i class="fas fa-map-marker-alt" data-v-4997f54d></i> Свидания </h5><button class="btn btn-outline-light" data-v-4997f54d>Добавить +</button></div></div><div class="card gradient-card-right" data-v-4997f54d><div class="card-body" data-v-4997f54d><h5 class="card-title" data-v-4997f54d><i class="fas fa-bolt" data-v-4997f54d></i> Внимание </h5><button class="btn btn-outline-light" data-v-4997f54d>Получить +</button></div></div></div><div class="age-filter border rounded py-2" data-v-4997f54d><i class="fas fa-sliders-h" data-v-4997f54d></i> Девушки, 18-23 </div></div><br data-v-4997f54d>',2);function la(t,e,a,s,i,r){return(0,n.uX)(),(0,n.CE)("main",Ve,[(0,n.Lk)("div",Ge,[(0,n.Lk)("div",ta,[(0,n.Lk)("div",ea,[(0,n.Lk)("img",{src:"/api/users/f1/"+t.user.avatar||0,alt:"Avatar",style:{cursor:"pointer"}},null,8,aa),sa,na,(0,n.Lk)("h2",null,(0,ut.v_)(t.user.name),1),(0,n.Lk)("p",null,"Возраст: "+(0,ut.v_)(r.calculateAge(t.user.birthdate)),1),(0,n.Lk)("div",ia,[(0,n.Lk)("p",null,"Описание: "+(0,ut.v_)(t.user.about),1),ra])])])]),oa])}var da={name:"editPerson",data(){return{}},methods:{calculateAge(t){const e=new Date,a=new Date(t);let s=e.getFullYear()-a.getFullYear();const n=e.getMonth()-a.getMonth();return(n<0||0===n&&e.getDate()<a.getDate())&&s--,s}},computed:{...(0,x.aH)(["user"])},created(){}};const ca=(0,lt.A)(da,[["render",la],["__scopeId","data-v-4997f54d"]]);var ua=ca,ha={name:"App",components:{createPerson:ct,AnketsNew:Jt,matchAnkets:ve,messReg:we,sucReg:Oe,noAncets:Xe,repost:Ye,editPerson:ua},data(){return{loading:!0,tg:window.Telegram.WebApp}},computed:{...(0,x.aH)(["user","anket","currentComponent","actMenu"])},methods:{...(0,x.i0)(["updateUserData","updateAnketData","changeComponent","updateMenuData"]),async loaderInfo(){try{const t=await A("/",{initData:this.tg.initData,initDataUnsafe:this.tg.initDataUnsafe,platform:this.tg.platform});t.user?(alert(t.user),t.user.token=t.token,this.updateUserData({...t.user}),this.updateAnketData(t.ankets),this.loadComponent("AnketsNew"),setTimeout((()=>{this.loading=!1}),3e3)):(this.updateUserData({token:t.token}),this.updateMenuData(!1),this.loadComponent("messReg"),setTimeout((()=>{this.loading=!1}),3e3))}catch(t){console.error("Ошибка загрузки данных:",t)}},loadComponent(t){this.changeComponent(t)}},mounted(){this.loaderInfo()}};const pa=(0,lt.A)(ha,[["render",D],["__scopeId","data-v-b49ef1a6"]]);var ma=pa;const ga=(0,x.y$)({state:{currentComponent:null,actMenu:!1,anket:[],actions:[],user:{id:null,name:"",birthdate:null,avatar:"",searchsex:"",sex:"",about:"",token:"",tid:null}},mutations:{setCurrentComponent(t,e){t.currentComponent=e},SET_ANKET_DATA(t,e){t.anket=e},ADD_ANKET_DATA(t,e){t.anket.push(...e)},DEL_ANKET_DATA(t,e){t.anket.splice(0,e)},SET_USER_DATA(t,e){t.user={...t.user,...e}},SET_ACTIONS_DATA(t,e){t.actions.push(e)},DELL_ACTIONS_DATA(t){t.actions=[]},SET_MENU_DATA(t,e){t.actMenu=e}},actions:{changeComponent({commit:t},e){t("setCurrentComponent",e)},updateAnketData({commit:t},e){t("SET_ANKET_DATA",e)},addAnketData({commit:t},e){t("ADD_ANKET_DATA",e)},dellAnketData({commit:t},e){t("DEL_ANKET_DATA",e)},dellActionsData({commit:t},e){t("DEL_ACTIONS_DATA",e)},updateUserData({commit:t},e){t("SET_USER_DATA",e)},updateActionsData({commit:t},e){t("SET_ACTIONS_DATA",e)},updateMenuData({commit:t},e){t("SET_MENU_DATA",e)}}});var va=ga;const ba=(0,s.Ef)(ma);ba.use(va),ba.mount("#app")},8026:function(t,e,a){t.exports=a.p+"img/noAvatar.9d0dc018.jpg"}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,n,i){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],i=t[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[s,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/"}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,i,r=s[0],o=s[1],l=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(e&&e(s);d<r.length;d++)i=r[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},s=self["webpackChunkpeach_client"]=self["webpackChunkpeach_client"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(8493)}));s=a.O(s)})();
//# sourceMappingURL=app.bb22e85e.js.map