(function(){"use strict";var e={8275:function(e,t,a){var n=a(5130),o=a(6768);const r=e=>((0,o.Qi)("data-v-77c83e74"),e=e(),(0,o.jt)(),e),s={id:"app"},l={key:0,class:"loading"},i=r((()=>(0,o.Lk)("div",{class:"gradient-div"},[(0,o.Lk)("p",{class:"position-absolute top-0 start-50 translate-middle-x"},"v.1.0"),(0,o.Lk)("div",{class:"spinner-border text-light lst",role:"status"}),(0,o.Lk)("p",{class:"position-absolute bottom-0 start-50 translate-middle-x"},"Loading...")],-1))),u=[i],c={key:1},d={key:0,class:"fixed-bottom navbar-expand-sm bg-light"},p={class:"nav nav-pills nav-fill gap-2 p-2 small rounded-1 shadow-sm colorss",role:"tablist",style:{"--bs-nav-link-color":"#ff7e5f","--bs-nav-pills-link-active-color":"#fff","--bs-nav-pills-link-active-bg":"#ff7e5f"}},m=r((()=>(0,o.Lk)("i",{class:"bi bi-envelope-open nav-link rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),h=[m],v=r((()=>(0,o.Lk)("i",{class:"bi bi-arrow-through-heart-fill nav-link active rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),b=[v],f=r((()=>(0,o.Lk)("i",{class:"bi bi-chat-heart nav-link rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true",style:{"font-size":"1.5rem"}},null,-1))),k=[f],g=r((()=>(0,o.Lk)("i",{class:"bi bi-person-fill nav-link rounded-5","data-bs-toggle":"tab",type:"button",role:"tab","aria-selected":"true"},null,-1))),L=[g];function y(e,t,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",s,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e.currentComponent))),r.loading?((0,o.uX)(),(0,o.CE)("div",l,u)):((0,o.uX)(),(0,o.CE)("div",c,[r.userConnect?((0,o.uX)(),(0,o.CE)("nav",d,[(0,o.Lk)("ul",p,[(0,o.Lk)("li",{class:"nav-item",onClick:t[0]||(t[0]=e=>i.loadComponent("Repost")),role:"presentation"},h),(0,o.Lk)("li",{class:"nav-item",onClick:t[1]||(t[1]=e=>i.loadComponent("anketsNew")),role:"presentation"},b),(0,o.Lk)("li",{class:"nav-item",onClick:t[2]||(t[2]=e=>i.loadComponent("Chat")),role:"presentation"},k),(0,o.Lk)("li",{class:"nav-item",onClick:t[3]||(t[3]=e=>i.loadComponent("editPerson")),role:"presentation"},L)])])):(0,o.Q3)("",!0)]))])}a(1373);const C="https://podryvanov.ru/api/users";async function w(e,t,a={}){const n=`${C}${e}`,o={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t||""}`},...a};try{const e=await fetch(n,o);if(!e.ok)throw new Error(`Ошибка: ${e.status} ${e.statusText}`);return await e.json()}catch(r){throw console.error("Ошибка при выполнении запроса:",r),r}}async function x(e,t){return w(e,{method:"POST",body:JSON.stringify(t)})}var A=a(782);const D=e=>((0,o.Qi)("data-v-78368025"),e=e(),(0,o.jt)(),e),T={class:"container messDiv"},_={class:"p-5 rounded mt-3"},I={class:"col-md-7 col-lg-8"},E={class:"profile-header"},j=["src"],O=D((()=>(0,o.Lk)("h4",{class:"mb-3 text-center"},"Заполните ваш профиль",-1))),S={class:"row g-3"},U={class:"col-12"},F=D((()=>(0,o.Lk)("label",{for:"firstName",class:"form-label"},"Ваше имя",-1))),N={class:"col-md-5"},P=D((()=>(0,o.Lk)("label",{for:"birthdate",class:"form-label"},"Дата рождения",-1))),$=["max"],z={class:"col-md-5"},X=D((()=>(0,o.Lk)("label",{class:"form-label"},"Ваш пол",-1))),q=D((()=>(0,o.Lk)("option",{value:""},"Выбор ...",-1))),J=D((()=>(0,o.Lk)("option",{value:"1"},"Мужчина",-1))),R=D((()=>(0,o.Lk)("option",{value:"2"},"Девушка",-1))),V=[q,J,R],B={class:"col-12"},Q=D((()=>(0,o.Lk)("label",{for:"about",class:"form-label"},"Описание",-1))),W={class:"col-md-5"},G=D((()=>(0,o.Lk)("label",{class:"form-label"},"Вы ищите",-1))),H=D((()=>(0,o.Lk)("option",{value:""},"Выбор ...",-1))),K=D((()=>(0,o.Lk)("option",{value:"2"},"Девушек",-1))),Y=D((()=>(0,o.Lk)("option",{value:"1"},"Мужчин",-1))),Z=[H,K,Y],M=D((()=>(0,o.Lk)("hr",{class:"my-4"},null,-1))),ee=D((()=>(0,o.Lk)("button",{class:"w-100 btn btn-lg",type:"submit"},"Сохранить",-1))),te=D((()=>(0,o.Lk)("br",null,null,-1))),ae=D((()=>(0,o.Lk)("br",null,null,-1))),ne=D((()=>(0,o.Lk)("br",null,null,-1))),oe=D((()=>(0,o.Lk)("br",null,null,-1)));function re(e,t,r,s,l,i){return(0,o.uX)(),(0,o.CE)("main",T,[(0,o.Lk)("div",_,[(0,o.Lk)("div",I,[(0,o.Lk)("div",E,[(0,o.Lk)("img",{src:e.user.avatar||a(8026),alt:"Avatar",onClick:t[0]||(t[0]=(...e)=>i.triggerFileInput&&i.triggerFileInput(...e)),style:{cursor:"pointer",border:"5px solid","border-color":"aliceblue"}},null,8,j)]),O,(0,o.Lk)("form",{onSubmit:t[10]||(t[10]=(0,n.D$)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"])),class:"needs-validation"},[(0,o.Lk)("div",S,[(0,o.Lk)("div",U,[F,(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.user.name=t),type:"text",class:"form-control",placeholder:"",required:"",onInput:t[2]||(t[2]=(...e)=>i.validateName&&i.validateName(...e)),title:"Только буквы и пробелы"},null,544),[[n.Jo,e.user.name]])]),(0,o.Lk)("div",N,[P,(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.user.birthdate=t),type:"date",class:"form-control",required:"",max:l.maxDate,onChange:t[4]||(t[4]=(...e)=>i.validateBirthdate&&i.validateBirthdate(...e))},null,40,$),[[n.Jo,e.user.birthdate]])]),(0,o.Lk)("div",z,[X,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.user.sex=t),class:"form-select",id:"sex",required:""},V,512),[[n.u1,e.user.sex]])]),(0,o.Lk)("div",B,[Q,(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.user.about=t),type:"text",class:"form-control",placeholder:"Люблю гулять по Москве",required:"",onInput:t[7]||(t[7]=(...e)=>i.validateAbout&&i.validateAbout(...e)),title:"Только буквы и пробелы"},null,544),[[n.Jo,e.user.about]])]),(0,o.Lk)("div",W,[G,(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.user.searchsex=t),class:"form-select",id:"search",required:""},Z,512),[[n.u1,e.user.searchsex]])])]),(0,o.Lk)("input",{type:"file",ref:"fileInput",style:{display:"none"},onChange:t[9]||(t[9]=(...e)=>i.handleFileChange&&i.handleFileChange(...e)),accept:"image/png, image/jpeg, image/jpg"},null,544),M,ee],32)])]),te,ae,ne,oe])}var se={name:"createPerson",data(){return{event_avatar:"",tg:window.Telegram.WebApp,maxDate:(new Date).toISOString().split("T")[0]}},computed:{...(0,A.aH)(["user"])},methods:{...(0,A.i0)(["updateUserData"]),triggerFileInput(){this.$refs.fileInput.click()},handleSubmit(){this.updateUserData(this.user),this.user.name&&this.user.avatar&&this.user.searchsex&&this.user.sex?this.uploadImage():(console.log(this.user),console.log("Данных не хватает для создания анкеты"))},validateName(){this.user.name=this.user.name.replace(/[^A-Za-zА-Яа-яЁё\s]/g,"")},validateAbout(){this.user.about=this.user.about.replace(/[^A-Za-zА-Яа-яЁё\s]/g,"")},validateBirthdate(){new Date(this.user.birthdate).getFullYear(),(new Date).getFullYear()},handleFileChange(e){const t=e.target.files[0];t&&["image/jpeg","image/png","image/jpg"].includes(t.type)?(this.previewImage(t),this.event_avatar=t):alert("Only JPG and PNG files are allowed!")},previewImage(e){const t=new FileReader;t.onload=e=>{this.user.avatar=e.target.result},t.readAsDataURL(e)},uploadImage(){this.user.avatar?x("/upload",{data:this.user,token:this.user.token}).then((e=>{console.log(e),e.message&&(this.user.id=e.newId,this.user.token=e.token,this.changeComponent("Ankets"))})).catch((e=>console.error("Error:",e))):alert("Пожалуйста, выберите изображение для загрузки.")}}},le=a(1241);const ie=(0,le.A)(se,[["render",re],["__scopeId","data-v-78368025"]]);var ue=ie,ce={name:"App",components:{createPerson:ue},data(){return{loading:!0,userConnect:!1,tg:window.Telegram.WebApp}},computed:{...(0,A.aH)(["user","anket","currentComponent"])},methods:{...(0,A.i0)(["updateUserData","updateAnketData","changeComponent"]),async loaderInfo(){try{const e=await x("/",this.tg.initData);console.log(e),e.user?(this.updateUserData(e.user),this.updateUserData({token:e.token}),this.updateAnketData(e.ankets)):this.updateUserData({token:e.token})}catch(e){console.error("Ошибка загрузки данных:",e)}},loadComponent(e){this.changeComponent(e)}},mounted(){this.loaderInfo(),setTimeout((()=>{null!==this.user.id?(this.loading=!1,this.userConnect=!0):(this.loading=!1,this.userConnect=!1,this.loadComponent("createPerson"))}),5e3)}};const de=(0,le.A)(ce,[["render",y],["__scopeId","data-v-77c83e74"]]);var pe=de;const me=(0,A.y$)({state:{currentComponent:null,anket:{id:null,name:"",age:"",about:"",img_main:"",currentId:1,statusSearch:null},user:{id:null,name:"",age:null,avatar:"",searchsex:"",sex:"",about:"",token:""}},mutations:{setCurrentComponent(e,t){e.currentComponent=t},SET_ANKET_DATA(e,t){e.anket=t},SET_USER_DATA(e,t){e.user=t}},actions:{changeComponent({commit:e},t){e("setCurrentComponent",t)},updateAnketData({commit:e},t){e("SET_ANKET_DATA",t)},updateUserData({commit:e},t){e("SET_USER_DATA",t)}}});var he=me;const ve=(0,n.Ef)(pe);ve.use(he),ve.mount("#app")},8026:function(e,t,a){e.exports=a.p+"img/noAvatar.9d0dc018.jpg"}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,i=0;i<n.length;i++)(!1&r||s>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(l=!1,r<s&&(s=r));if(l){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,s=n[0],l=n[1],i=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(i)var c=i(a)}for(t&&t(n);u<s.length;u++)r=s[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkpeach_client"]=self["webpackChunkpeach_client"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(8275)}));n=a.O(n)})();
//# sourceMappingURL=app.e8017126.js.map